/**
 * Joomla! component Joaktree
 *
 * @version	2.0.0
 * @author	Niels van Dantzig (2009-2014) - Robert Gastaud (2017-2024)
 * @package	Joomla
 * @subpackage	Joaktree
 * @license	GNU/GPL
 *
 * Component for genealogy in Joomla!
 *
 * Joomla! 5.x conversion by Conseilgouz
 *
 */
var jtisotope=[];function JTIsotope(t,e){$myiso=this,this.isoid=t,this.qsRegex=null,this.close=null,this.loadCount=0,this.std_parents=["family","alpha"],this.parent="family",this.cookie_name="com_joaktree_"+this.isoid,this.me="#isotope-main-"+this.isoid+" ",this.options=e,this.filters={},this.items_limit=this.options.limit_items,this.sav_limit=this.options.limit_items,this.empty_message="true"==this.options.empty,this.asc="true"==this.options.ascending,this.sort_by=this.options.sortby,this.grid_toggle=document.querySelector(".isotope_grid"),this.iso_div=document.querySelector(".isotope-main .isotope-div"),""==this.options.default_family?this.filters.family=["*"]:this.filters.family=[this.options.default_family],this.filters.alpha=["*"]}document.addEventListener("DOMContentLoaded",(function(){mains=document.querySelectorAll(".isotope-main");for(var t=0;t<mains.length;t++){let e=mains[t];if(isoid=e.getAttribute("data"),"undefined"==typeof Joomla||void 0===Joomla.getOptions)return console.error("Joomla.getOptions not found!\nThe Joomla core.js file is not being loaded."),!1;if(options_iso=Joomla.getOptions("com_joaktree_"+isoid),"undefined"==typeof options_iso)return!1;jtisotope[isoid]=new JTIsotope(isoid,options_iso),jtisotope[isoid].goisotope(isoid)}})),JTIsotope.prototype.goisotope=function(t){if($myiso=jtisotope[t],$myiso.cookie=$myiso.getCookie($myiso.cookie_name),""!=$myiso.cookie){let t=$myiso.cookie.split("&");for(let e=0;e<t.length;++e)$myiso.splitCookie($myiso.isoid,t[e])}$items=document.querySelectorAll("#isotope-main-"+$myiso.isoid+" .isotope_item");for(var e=0;e<$items.length;e++)"masonry"!=$myiso.options.layout&&"fitRows"!=$myiso.options.layout&&"packery"!=$myiso.options.layout||($items[e].style.width=100/parseInt($myiso.options.nbcol)-2+"%"),"vertical"==$myiso.options.layout&&($items[e].style.width="100%"),$items[e].style.background=$myiso.options.background;"string"==typeof $myiso.sort_by&&($myiso.sort_by=$myiso.sort_by.split(","));var o=document.querySelector($myiso.me+".isotope_grid");$myiso.iso=new Isotope(o,{itemSelector:$myiso.me+".isotope_item",percentPosition:!0,layoutMode:$myiso.options.layout,getSortData:{family:"[data-family]",date:"[data-date]"},sortBy:$myiso.sort_by,sortAscending:$myiso.asc,isJQueryFiltering:!1,filter:function(t){return!!t&&($id=t.parentNode.getAttribute("data"),jtisotope[$id].grid_filter($id,t))}}),imagesLoaded(o,(function(){$myiso=jtisotope[this.elements[0].getAttribute("data")],$myiso.updateFilterCounts(),"random"==$myiso.sort_by&&$myiso.iso.shuffle()})),"true"==$myiso.options.displayrange&&($myiso.min_range||($myiso.min_range=parseInt($myiso.options.minrange),$myiso.max_range=parseInt($myiso.options.maxrange)),$myiso.rangeSlider=new rSlider({target:"#rSlider",values:{min:parseInt($myiso.options.minrange),max:parseInt($myiso.options.maxrange)},step:parseInt($myiso.options.rangestep),set:[$myiso.min_range,$myiso.max_range],range:!0,tooltip:!0,scale:!0,labels:!0,onChange:$myiso.rangeUpdated})),iso_div=document.querySelector($myiso.me+".isotope-div"),iso_div.addEventListener("refresh",(function(){$myiso.iso.arrange()}));var i=document.querySelectorAll($myiso.me+".sort-by-button-group button");for(e=0;e<i.length;e++)["click","touchstart"].forEach((t=>{i[e].addEventListener(t,(t=>{let e=t.srcElement.parentNode.getAttribute("data"),o=jtisotope[e];t.stopPropagation(),t.preventDefault(),o.update_sort_buttons(t.srcElement);for(var s=0;s<i.length;s++)i[s].classList.remove("is-checked");t.srcElement.classList.add("is-checked")}))}));$myiso.quicksearch=document.querySelector($myiso.me+".quicksearch"),$myiso.quicksearch&&$myiso.quicksearch.addEventListener("keyup",(t=>{this.qsRegex=new RegExp(this.quicksearch.value,"gi"),this.CG_Cookie_Set(this.isoid,"search",this.quicksearch.value),this.updateFilterCounts()}));for(var s=document.querySelectorAll($myiso.me+".ison-cancel-squared"),r=0;r<s.length;r++)["click","touchstart"].forEach((t=>{s[r].addEventListener(t,(function(t){let e=this.getAttribute("data");e||(e=this.parentNode.getAttribute("data"));let o=jtisotope[e];t.stopPropagation(),t.preventDefault(),o.quicksearch&&(o.quicksearch.value=""),o.qsRegex=new RegExp("","gi"),o.CG_Cookie_Set(o.isoid,"search",""),o.rangeSlider&&(range_sel=o.range_init,ranges=range_sel.split(","),o.rangeSlider.setValues(parseInt(ranges[0]),parseInt(ranges[1])),o.CG_Cookie_Set(o.isoid,"range",range_sel)),o.filters.family=["*"],o.filters.alpha=["*"],grouptype=["family"];for(var i=0;i<grouptype.length;i++){agroup=document.querySelectorAll(o.me+".filter-button-group-"+grouptype[i]+" button");for(var s=0;s<agroup.length;s++)agroup[s].classList.remove("is-checked"),"*"==agroup[s].getAttribute("data-sort-value")&&o.addClass(agroup[s],"is-checked"),"all"==agroup[s].getAttribute("data-all")&&agroup[s].setAttribute("selected",!0),"fields"==grouptype[i]&&(o.removeClass(agroup[s],"iso_hide_elem"),myparent=agroup[s].parentNode.getAttribute("data-filter-group"),myparent&&(o.filters[myparent]=["*"]))}o.update_cookie_filter(),o.updateFilterCounts(),o.quicksearch&&o.quicksearch.focus()}))}));"multi"!=$myiso.options.displayfilterfamily&&"multiex"!=$myiso.options.displayfilterfamily||$myiso.events_multibutton("family"),"multi"==$myiso.options.displayalpha&&$myiso.events_multibutton("alpha"),"button"==$myiso.options.displayfilterfamily&&$myiso.events_button("family"),"button"==$myiso.options.displayalpha&&$myiso.events_button("alpha")},JTIsotope.prototype.rangeUpdated=function(){let t=this.target,e=document.querySelector(t).getAttribute("data"),o=jtisotope[e];o.range_sel=o.rangeSlider.getValue(),o.range_init=o.rangeSlider.conf.values[0]+","+o.rangeSlider.conf.values[o.rangeSlider.conf.values.length-1],o.CG_Cookie_Set(o.isoid,"range",o.range_sel),o.iso.arrange()},JTIsotope.prototype.remove_events_button=function(t){agroup=document.querySelectorAll(this.me+".filter-button-group-"+t+" button");for(var e=0;e<agroup.length;e++)["click","touchstart"].forEach((t=>{agroup[e].removeEventListener(t,this.listenbutton),agroup[e].removeEventListener(t,this.listenmultibutton)}))},JTIsotope.prototype.listenbutton=function(t){t.stopPropagation(),t.preventDefault(),id=t.currentTarget.parentNode.getAttribute("data"),jtisotope[id].filter_button(t.currentTarget,t),mygroup=t.currentTarget.parentNode.querySelectorAll("button");for(var e=0;e<mygroup.length;e++)jtisotope[id].removeClass(mygroup[e],"is-checked");jtisotope[id].addClass(t.currentTarget,"is-checked")},JTIsotope.prototype.events_button=function(t){agroup=document.querySelectorAll(this.me+".filter-button-group-"+t+" button");for(var e=0;e<agroup.length;e++)["click","touchstart"].forEach((t=>{agroup[e].addEventListener(t,this.listenbutton)}))},JTIsotope.prototype.events_multibutton=function(t){agroup=document.querySelectorAll(this.me+".filter-button-group-"+t+" button");for(var e=0;e<agroup.length;e++)["click","touchstart"].forEach((t=>{agroup[e].addEventListener(t,this.listenmultibutton)}))},JTIsotope.prototype.update_sort_buttons=function(t){var e=t.getAttribute("data-sort-value");if("random"==e)return this.CG_Cookie_Set(this.isoid,"sort",e+"-"),void this.iso.shuffle();for(sens=t.getAttribute("data-sens"),e=e.split(","),this.hasClass(t,"is-checked")?"-"==sens?(t.setAttribute("data-sens","+"),asc=!0):(t.setAttribute("data-sens","-"),asc=!1):(sens=t.getAttribute("data-init"),t.setAttribute("data-sens",sens),asc=!0,"-"==sens&&(asc=!1)),sortAsc={},i=0;i<e.length;i++)"featured"==e[i]?sortAsc[e[i]]=!1:sortAsc[e[i]]=asc;this.CG_Cookie_Set(this.isoid,"sort",e+"-"+asc),this.iso.options.sortBy=e,this.iso.options.sortAscending=sortAsc,this.iso.arrange()},JTIsotope.prototype.grid_filter=function(t,e){var o=jtisotope[t],i=!o.qsRegex||e.textContent.match(o.qsRegex),s=e.getAttribute("data-family"),r=(e.getAttribute("class").split(" "),!1),a=!0;if(-1==o.filters.alpha.indexOf("*")&&(alpha=e.getAttribute("data-alpha").substring(0,1),-1==o.filters.alpha.indexOf(alpha)))return!1;if(o.rangeSlider){var n=e.getAttribute("data-range");o.range_sel!=o.range_init&&(ranges=o.range_sel.split(","),a=parseInt(n)>=parseInt(ranges[0])&&parseInt(n)<=parseInt(ranges[1]))}if(-1!=o.filters.family.indexOf("*"))return i&&a&&!0;if(count=0,-1==o.filters.family.indexOf("*")){if(-1==o.filters.family.indexOf(s))return!1;count=1,r=!0}return"true"==o.options.searchmultiex?(lgth=o.filters.family.length,-1!=o.filters.family.indexOf("*")&&(lgth-=1),i&&a&&count==lgth):i&&a&&r},JTIsotope.prototype.filter_button=function(t,e){if($myid=t.parentNode.getAttribute("data"),$myiso=jtisotope[$myid],!$myiso.hasClass(t,"disabled")){$parent=t.parentNode.getAttribute("data-filter-group"),child=t.getAttribute("data-child");var o=t.getAttribute("data-sort-value");$isclone=!1,void 0===$myiso.filters[$parent]&&($myiso.filters[$parent]={}),$needclone=!1,$grdparent=t.parentNode.parentNode,"*"==o?$myiso.filters[$parent]=["*"]:($myiso.filters[$parent]=[o],child&&$myiso.set_family($myiso.me,"",child,o,"button")),$myiso.update_cookie_filter(),$myiso.updateFilterCounts()}},JTIsotope.prototype.filter_multi=function(t,e){id=t.parentNode.getAttribute("data"),$myiso=jtisotope[id];var o=t.getAttribute("data-sort-value");child=t.getAttribute("data-child"),$isclone=!1,$parent=t.parentNode.getAttribute("data-filter-group"),$myiso.toggleClass(t,"is-checked");var i=$myiso.hasClass(t,"is-checked");$needclone=!1,$grdparent=t.parentNode.parentNode,void 0===$myiso.filters[$parent]&&($myiso.filters[$parent]=[]),"*"==o?($myiso.filters[$parent]=["*"],child&&$myiso.set_family_all($myiso.me,child,"button")):($myiso.removeFilter($myiso.filters,$parent,"*"),$myiso.removeFilter($myiso.filters,$parent,"none"),i?($myiso.addFilter($myiso.filters,$parent,o),child&&$myiso.set_family($myiso.me,$parent,child,o,"button")):($myiso.removeFilter($myiso.filters,$parent,o),0==$myiso.filters[$parent].length&&($myiso.filters[$parent]=["*"]),child&&($myiso.filters[$parent]==["*"]?$myiso.set_family_all($myiso.me,child,"button"):$myiso.del_family($myiso.me,$parent,child,o,"button")))),$myiso.update_cookie_filter(),$myiso.updateFilterCounts()},JTIsotope.prototype.set_buttons_multi=function(t){if($parent=t.parentNode.getAttribute("data-filter-group"),"*"==t.getAttribute("data-sort-value")){buttons=t.parentNode.querySelectorAll("button.is-checked");for(var e=0;e<buttons.length;e++)this.removeClass(buttons[e],"is-checked");this.addClass(t,"is-checked")}else 0==this.filters[$parent].length||"*"==this.filters[$parent]?(button_all=t.parentNode.querySelector('[data-sort-value="*"]'),this.addClass(button_all,"is-checked"),this.filters[$parent]=["*"],this.update_cookie_filter(),this.iso.arrange()):(button_all=t.parentNode.querySelector('[data-sort-value="*"]'),this.removeClass(button_all,"is-checked"))},JTIsotope.prototype.updateFilterCounts=function(){for(var t=document.querySelectorAll(this.me+".isotope_item"),e=(this.iso.getFilteredItemElements().length,document.querySelector(this.me+".iso_div_empty"),0);e<t.length;e++)this.hasClass(t[e],"iso_hide_elem")&&this.removeClass(t[e],"iso_hide_elem");this.iso.arrange()},JTIsotope.prototype.debounce=function(t,e){var o;return function(){o&&clearTimeout(o),o=setTimeout((function(){t(),o=null}),e||100)}},JTIsotope.prototype.addFilter=function(t,e,o){e&&-1==t[e].indexOf(o)&&t[e].push(o)},JTIsotope.prototype.removeFilter=function(t,e,o){Array.isArray(t[e])||(t[e]=["*"]);var i=t[e].indexOf(o);-1!=i&&t[e].splice(i,1)},JTIsotope.prototype.update_cookie_filter=function(){for(x in $filter_cookie="",this.filters)"null"!=x&&($filter_cookie.length>0&&($filter_cookie+=">"),$filter_cookie+=x+"<"+this.filters[x].toString());$filter_cookie.length>0&&($filter_cookie+=">"),this.CG_Cookie_Set(this.isoid,"filter",$filter_cookie)},JTIsotope.prototype.getCookie=function(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):""},JTIsotope.prototype.CG_Cookie_Set=function(t,e,o){var i;$myiso=jtisotope[t],duration=$myiso.options.cookieduration;var s=new Date;"undefined"==typeof duration||0==duration?i="":"-1"==duration?i=";Max-Age=0;":"1d"==duration?(s.setTime(s.getTime()+864e5),i=";expires="+s.toUTCString()):"1w"==duration?(s.setTime(s.getTime()+6048e5),i=";expires="+s.toUTCString()):"1m"==duration&&(s.setTime(s.getTime()+2592e6),i=";expires="+s.toUTCString()),$secure="","https:"==window.location.protocol&&($secure="secure;"),lecookie=$myiso.getCookie($myiso.cookie_name),$val=e+":"+o,$cook=$val,""!=lecookie&&(lecookie.indexOf(e)>=0?($cook="",$arr=lecookie.split("&"),$arr.forEach($myiso.replaceCookie,$val)):$cook=lecookie+"&"+$val),document.cookie=$myiso.cookie_name+"="+$cook+i+"; path=/; samesite=lax;"+$secure},JTIsotope.prototype.replaceCookie=function(t,e,o){this.startsWith("search:")&&t.indexOf("search:")>=0&&(o[e]=this),this.startsWith("sort:")&&t.indexOf("sort:")>=0&&(o[e]=this),this.startsWith("filter:")&&t.indexOf("filter:")>=0&&(o[e]=this),this.startsWith("range:")&&t.indexOf("range:")>=0&&(o[e]=this),$cook.length>0&&($cook+="&"),$cook+=o[e]},JTIsotope.prototype.splitCookie=function(t,e){if(this.quicksearch=document.querySelector(this.me+".quicksearch"),e.indexOf("search:")>=0&&this.quicksearch&&(val=e.split(":"),this.qsRegex=new RegExp(val[1],"gi"),this.quicksearch.value=val[1]),e.indexOf("sort:")>=0){for(val=e.split(":"),val=val[1].split("-"),sort_by=val[0].split(","),asc="true"==val[1],sortAsc={},i=0;i<sort_by.length;i++)"featured"==sort_by[i]?sortAsc[sort_by[i]]=!1:sortAsc[sort_by[i]]=asc;for(asc=sortAsc,sortButtons=document.querySelectorAll(this.me+".sort-by-button-group button"),s=0;s<sortButtons.length;s++)"*"!=val[0]&&(sortButtons[s].classList.remove("is-checked"),sortButtons[s].getAttribute("data-sort-value")==val[0]&&(sortButtons[s].classList.add("is-checked"),sortButtons[s].setAttribute("data-sens","+"),"true"!=val[1]&&sortButtons[s].setAttribute("data-sens","-")))}if(e.indexOf("filter:")>=0&&(val=e.split(":"),val[1].length>0))for(val=val[1].split(">"),x=0;x<val.length-1;x++)if(values=val[x].split("<"),-1!=this.std_parents.indexOf(values[0])&&"*"!=values[1]){for(this.filters[values[0]]=values[1].split(","),"lang"==values[0]?filterButtons=document.querySelectorAll(this.me+".iso_lang button.is-checked"):filterButtons=document.querySelectorAll(this.me+".filter-button-group-"+values[0]+" button.is-checked"),f=0;f<filterButtons.length;f++)filterButtons[f].classList.remove("is-checked");for(v=0;v<this.filters[values[0]].length;v++)$button=document.querySelector(this.me+".iso_button_"+values[0]+"_"+this.filters[values[0]][v]),$button&&this.addClass($button,"is-checked")}e.indexOf("range:")>=0&&(val=e.split(":"),val[1].length>0&&(spl=val[1].split(","),this.min_range=parseInt(spl[0]),this.max_range=parseInt(spl[1])))},JTIsotope.prototype.hasClass=function(t,e){var o=new RegExp("(?:\\s|^)"+e+"(?:\\s|$)");return!!t.className.match(o)},JTIsotope.prototype.addClass=function(t,e){t.className+=" "+e},JTIsotope.prototype.removeClass=function(t,e){var o=new RegExp("(?:\\s|^)"+e+"(?:\\s|$)");t.className=t.className.replace(o," ")},JTIsotope.prototype.toggleClass=function(t,e){$myiso.hasClass(t,e)?$myiso.removeClass(t,e):$myiso.addClass(t,e)},JTIsotope.prototype.scrollTo=function(t,e){var o=document.scrollingElement||document.documentElement,i=o.scrollTop,s=t-i,r=performance.now(),a=function(n){var l,u,p,c=n-r;o.scrollTop=parseInt((l=c,u=i,p=s,(l/=e/2)<1?p/2*l*l+u:-p/2*(--l*(l-2)-1)+u)),c<e?requestAnimationFrame(a):o.scrollTop=t};requestAnimationFrame(a)},JTIsotope.prototype.resetToggle=function(){$myiso.grid_toggle&&$myiso.hasClass($myiso.grid_toggle,"isotope-hide")?($myiso.removeClass($myiso.iso_article,"isotope-open"),$myiso.addClass($myiso.iso_article,"isotope-hide"),$myiso.removeClass($myiso.grid_toggle,"isotope-hide"),$myiso.iso_div.refresh):$myiso.iso_article&&$myiso.hasClass($myiso.iso_article,"isotope-open")&&($myiso.removeClass($myiso.iso_article,"isotope-open"),$myiso.addClass($myiso.iso_article,"isotope-hide"),$myiso.iso_article.innerHTML(""),$myiso.iso_div.refresh)},grid_filter=function(t){},go_click=function(t,e){event.preventDefault(),"webLinks"==t||window.event.ctrlKey?window.open(e,"_blank"):location=e};